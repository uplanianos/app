<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en-US">
<html>
<head>
	<meta http-equiv="refresh" content="300">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="media/uplanianos-icon.png">
	<link rel="stylesheet" href="files/pages-style.css">
	<title>Uplanianos - Temporizador de Clases</title>
</head>

<body>
<a href="index.html"><div id="return" class="return">&larrhk;</div></a>


<div class="main">
    <div class="labels"><p>
      <select class="titleMenu" id="titleMenu" name="titleMenu" >
      <option value="0" selected disabled="disabled">‚ò∞</option>
      <option value="1">üìñ Agenda</option>
      <option value="2">‚úîÔ∏è Asistencia</option>
      <option value="3">üìÅ Avance Curricular</option>
      <option value="4">üóìÔ∏è Calendario II, 2024</option>
      <option value="5">‚è≤Ô∏è Cuenta Regresiva</option>
      <option value="6">üìà Escala de Notas</option>
      <option value="7">üìö Horario de Clases</option>
      <option value="8">üíä Justificador</option>
      <option value="9">üìú Manual Estudiante</option>
      <option value="10">‚úçÔ∏è Nota de Pruebas</option>
      <option value="11">üíØ Promedio Integral</option>
      <option value="12">üíØ Promedio Porcentual</option>
      <option value="13">üìã Simulador Examen</option>
      <option value="14">‚è≥ Temporizador</option>
      <option value="15">üìù Timebox (Upla)</option>
      <option value="16">üìä Uplad√≠sticas</option>
    </select>
    <b>Uplanianos App:</b> Temporizador-inator!</p></div>

<script type="text/javascript">
document.getElementById('titleMenu').addEventListener('change', function() {
 if (titleMenu.value == 1) {blurMenu(); window.location = "agenda.html"}
 if (titleMenu.value == 2) {blurMenu(); window.location = "asistencia.html?tipo=2&clases=12&asiste=0"}
 if (titleMenu.value == 3) {blurMenu(); window.location = "avance.html"}
 if (titleMenu.value == 4) {blurMenu(); window.location = "calendario.html"}
 if (titleMenu.value == 5) {blurMenu(); window.location = "countdown.html"}
 if (titleMenu.value == 6) {blurMenu(); window.location = "notas.html?escala=70"}
 if (titleMenu.value == 7) {blurMenu(); window.location = "horario.html"}
 if (titleMenu.value == 8) {blurMenu(); window.location = "justify.html"}
 if (titleMenu.value == 9) {blurMenu(); window.location = "manual-estudiante.html"}
 if (titleMenu.value == 10) {blurMenu(); window.location = "pruebas.html?total=100&puntos=0"}
 if (titleMenu.value == 11) {blurMenu(); window.location = "integrales.html?x=2&g1=0.0&g2=0.0"}
 if (titleMenu.value == 12) {blurMenu(); window.location = "promedios.html"}
 if (titleMenu.value == 13) {blurMenu(); window.location = "examen.html?promedio=3.5&examen=4.0"}
 if (titleMenu.value == 14) {blurMenu(); window.location = "temporizador.html"}
 if (titleMenu.value == 15) {blurMenu(); window.location = "timebox.html"}
 if (titleMenu.value == 16) {blurMenu(); window.location = "upladisticas.html"}
});

function blurMenu(){document.getElementById('titleMenu').value = 0; document.getElementById('titleMenu').blur();}
</script> 


<div class="grid-item" id="secondSemester" style="font-size: 14px; margin-top: 24px; margin-left: 2%; margin-right: 3%; padding: 12px; background-color: #A7C7E7; /* Pastel Blue */">
<b>Cron√≥metro autom√°tico para las clases.</b>
</div>



	<div id="studyBar" class="grid-item-slider" style="background-color: #0000CC66; margin-top: 24px; margin-bottom: 24px">

	  <br><font id="checkpoint" class="checkpoint">üìÖ Tiempo para <span id="nextEvent">el siguiente evento</span>:</font><br>

	  <div id="countdown" class="countdown" style="margin-top: 12px; margin-left: -8px;">
	    <div><p class="classCountdown" id="hoursStart" style="margin: 0px;">-</p></div>
	    <div style="margin-left: -10%; margin-right: -5%;"><p class="classCountdown" style="margin: 0px;">:</p></div>
	    <div><p class="classCountdown" id="minutesStart" style="margin: 0px;">-</p></div>
	    <div style="margin-left: -10%; margin-right: -5%;"><p class="classCountdown" style="margin: 0px;">:</p></div>
	    <div><p class="classCountdown" id="secondsStart" style="margin: 0px;">-</p></div>
	  </div>

	  <div id="clock" class="clock" style="margin-bottom: 12px; margin-left: -8px;">
	    <div>Horas</div>
	    <div style="margin-left: -10%; margin-right: -5%;"></div>
	    <div>Minutos</div>
	    <div style="margin-left: -10%; margin-right: -5%;"></div>
	    <div>Segundos</div>
	  </div>

	  <div id="progressBar" style="display: none; width: 95%; padding-right: -6px; height: 30px; margin-left: auto; margin-right: auto; margin-top: 6px; margin-bottom: 24px;">
	   <input id="progress" class="temporizador" min="00.00" max="23.59" type="range" value="00.00" step="00.01" />
	  <div id="progressPercent" class="progressPercent" style="position: relative; width: 100%; padding-right: 3%; margin-top: -25px; text-align: center; color: #666; font-size: 10px;">-</div>
	  </div>

	  <div id="theWeekend" style="margin-top: 32px; text-align: center; font-color: white; font-weight: bold">
	    <p>No hay clases el fin de semana!</p><br><br>
	  </div>

	</div>

	<!- End of "grid-item-tools" Div ->
	</div>

    <br><br>
  </div>


<br><br>
</div>


<script type="text/javascript">
function startTimer() {
// SETTING CURRENT HOUR
const date = new Date();
const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
const thisMonth = date.getMonth() // ZERO is January
var thisDate = date.getDate()
var thisDay = date.getDay() // ZERO is Monday
// SETTING RIGHT NOW
const thisHour = date.getHours()
const theseMinutes = date.getMinutes()
// FORMATTING HOUR AS DOUBLE DIGITS
const doubleHour = thisHour.toString().padStart(2,0)
const doubleMinutes = theseMinutes.toString().padStart(2,0)

// SETTING UP CLASS PERIODS
const period1 = "08:00:00"
const period2 = "09:30:00"
const period3 = "11:00:00"
const period4 = "12:30:00"
const period5 = "14:00:00"
const period6 = "15:30:00"
const period7 = "17:00:00"
const period8 = "18:30:00"

// SETTING UP BREAKS
const break1 = "09:15:00"
const break2 = "10:45:00"
const break3 = "12:15:00"
const break4 = "13:45:00"
const break5 = "15:15:00"
const break6 = "16:45:00"
const break7 = "18:15:00"
const break8 = "19:45:00"

const midnight = "23:59:00"

// SETTING CURRENT TIME
var rightNow = doubleHour+"."+doubleMinutes; // console.log(rightNow)

// SETTING UP CLASS TIME (DEFAULT VALUE)
var classTime = "00:00:00"

// SETTING HTML ELEMENTS
const nextEvent = document.getElementById("nextEvent")
progress = document.getElementById('progress')

// SETTING UP PERIODS
if (rightNow  < 08.00 ) {classTime = period1; nextEvent.innerHTML = "el 1¬∞ per√≠odo (8:00)";				progress.min = "00.00"; progress.max = "08.00"}
if (rightNow >= 08.00 && rightNow < 09.15) {classTime = break1; nextEvent.innerHTML = "el pr√≥ximo receso (9:15)";	progress.min = "08.00"; progress.max = "09.15"}
if (rightNow >= 09.15 && rightNow < 09.30) {classTime = period2; nextEvent.innerHTML = "el 2¬∞ per√≠odo (9:30)";		progress.min = "09.15"; progress.max = "09.30"}
if (rightNow >= 09.30 && rightNow < 10.45) {classTime = break2; nextEvent.innerHTML = "el pr√≥ximo receso (10:45)";	progress.min = "09.30"; progress.max = "10.45"}
if (rightNow >= 10.45 && rightNow < 11.00) {classTime = period3; nextEvent.innerHTML = "el 3¬∞ per√≠odo (11:00)";		progress.min = "10.45"; progress.max = "11.00"}
if (rightNow >= 11.00 && rightNow < 12.15) {classTime = break3; nextEvent.innerHTML = "el pr√≥ximo receso (12:15)";	progress.min = "11.00"; progress.max = "12.15"}
if (rightNow >= 12.15 && rightNow < 12.30) {classTime = period4; nextEvent.innerHTML = "el 4¬∞ per√≠odo (12:30)";		progress.min = "12.15"; progress.max = "12.30"}
if (rightNow >= 12.30 && rightNow < 13.45) {classTime = break4; nextEvent.innerHTML = "el pr√≥ximo receso (13:45)";	progress.min = "12.30"; progress.max = "13.45"}
if (rightNow >= 13.45 && rightNow < 14.00) {classTime = period5; nextEvent.innerHTML = "el 5¬∞ per√≠odo (14:00)";		progress.min = "13.45"; progress.max = "14.00"}
if (rightNow >= 14.00 && rightNow < 15.15) {classTime = break5; nextEvent.innerHTML = "el pr√≥ximo receso (15:15)";	progress.min = "14.00"; progress.max = "15.15"}
if (rightNow >= 15.15 && rightNow < 15.30) {classTime = period6; nextEvent.innerHTML = "6¬∞ per√≠odo (15:30)";		progress.min = "15.15"; progress.max = "15.30"}
if (rightNow >= 15.30 && rightNow < 16.45) {classTime = break6; nextEvent.innerHTML = "el pr√≥ximo receso (16:45)";	progress.min = "15.30"; progress.max = "16.45"}
if (rightNow >= 16.45 && rightNow < 17.00) {classTime = period7; nextEvent.innerHTML = "7¬∞ per√≠odo (17:00)";		progress.min = "16.45"; progress.max = "17.00"}
if (rightNow >= 17.00 && rightNow < 18.15) {classTime = break7; nextEvent.innerHTML = "el pr√≥ximo receso (18:15)";	progress.min = "17.00"; progress.max = "18.15"}
if (rightNow >= 18.15 && rightNow < 18.30) {classTime = period8; nextEvent.innerHTML = "el 8¬∞ per√≠odo (18:30)";		progress.min = "18.15"; progress.max = "18.30"}
if (rightNow >= 18.30 && rightNow < 19.45) {classTime = break8; nextEvent.innerHTML = "terminar las clases";		progress.min = "18.30"; progress.max = "19.45"}
if (rightNow >= 19.45) {classTime = midnight; nextEvent.innerHTML = "estudiar y descansar";				progress.min = "19.45"; progress.max = "23.59"}

// DATE FORMATTING AND TIME VARIABLES
var dateFormat = monthNames[thisMonth] + " " + thisDate + ", 2024 "

// UPDATE FINAL COUNTDOWN DATE
var finalDate = new Date(dateFormat+classTime).getTime()

// ORIGINAL COUNTDOWN DATE (COMMENTED OUT)
// var originalCountdown = new Date("Aug 7, 2024 10:45:00").getTime()

// FORMATTED COUNTDOWN DATE
var countdownDate = new Date(finalDate).getTime()

// thisDay=2; // Monday

// CHECK IF IT'S THE WEEKEND
if (thisDay == 6 || thisDay == 1) { // SATURDAY & SUNDAY
document.getElementById("checkpoint").style.display = "none"
document.getElementById("countdown").style.display = "none"
document.getElementById("clock").style.display = "none"
document.getElementById("progressBar").style.display = "none"
document.getElementById("theWeekend").style.display = "inline"
}

else {

  // HIDDING WEEKEND TEXT
  document.getElementById("theWeekend").style.display = "none"

  // Update the count down every 1 second
  var x = setInterval(function() {

    // Get todays date and time
    var now = new Date().getTime()

    // UPDATING RANGE PROGRESS
    let realHour = Math.floor( now % (1000*60*60*24) / (1000*60*60))-4; // TESTING THIS
    var realMinutes = Math.floor((now % (1000 * 60 * 60)) / (1000 * 60))

    // FORMATTING TIME TO DOUBLE DIGITS
    const doubleRealHour = realHour.toString().padStart(2,0)
    const doubleRealMinutes = realMinutes.toString().padStart(2,0)

    // CONSTRUCTING THE TICKING CLOCK
    var tickingClock = doubleRealHour + "." + doubleRealMinutes
    doubleClock = parseFloat(tickingClock).toFixed(2)

    // UPDATING PROGRESS BAR (WITH VALUE)
    progress.value = tickingClock // RANGE THUMB VALUE (CHAGED IN STYLE SHEET)
    // UPDATING PROGRESS BACKGROUND WITH PERCENTAGE VALUE
    var barValue = (tickingClock-progress.min)/(progress.max-progress.min)*100
    let valuePercent = parseFloat(barValue).toFixed(2)
    if (valuePercent < 85.00) { progress.style.background = 'linear-gradient(to right, lightgreen 0%, #50C878 ' + valuePercent + '%, #fff ' + valuePercent + '%, white 100%)' }
    if (valuePercent >= 85.00) { progress.style.background = 'linear-gradient(to right, pink 0%, #FF3131 ' + valuePercent + '%, #fff ' + valuePercent + '%, white 100%)' }
    // SOURCE FOR ORIGINAL CODE: https://stackoverflow.com/questions/18389224/how-to-style-html5-range-input-to-have-different-color-before-and-after-slider

    // UPDATING PROGRESS TEXT PERCENTAGE
    var progressPercent = document.getElementById("progressPercent")
    var roundPercent = Math.round(valuePercent).toFixed(0)
    progressPercent.innerHTML = roundPercent + '%'

    /*
    // TESTING PROGRESS BAR VALUES
    console.log('MONITORING:',
	'\nthisTime(onLoad):', rightNow,
	'|\nclassTime(onLoad):', classTime,
	'|\ntickingClock(now):', tickingClock,
	'|\nProgress(now):', progress.min, progress.value, progress.max,
	'|\nPercent(now):', valuePercent, roundPercent+'%')
    */


    // COUNTDOWN FUNCTIONALITY
    // COUNTDOWN FUNCTIONALITY
    // COUNTDOWN FUNCTIONALITY

    // Find the distance between now an the count down date
    var distance = countdownDate - now;
    
    // Time calculations for days, hours, minutes and seconds
    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60))
    var seconds = Math.floor((distance % (1000 * 60)) / 1000)

    // Output the result in an element with id="demo"
    document.getElementById("hoursStart").innerHTML = hours
    document.getElementById("minutesStart").innerHTML = minutes
    document.getElementById("secondsStart").innerHTML = seconds

    // ZERO HOUR && ZERO MINUTES FOR YELLOW SECONDS
    if (hours == 0 && minutes == 0) {document.getElementById("secondsStart").style.color = "yellow"}
    else {document.getElementById("secondsStart").style.color = "white"}

    // EXPIRED COUNTDOWN
    if (distance <= 0) {
    // RED STYLE WHEN EXPIRED
    classCountdown = document.querySelectorAll("p.classCountdown")
    for(let numbers of classCountdown) {numbers.style.color = "red"}
    // FIXING EXPIRED NEGATIVE NUMBERS
      document.getElementById("hoursStart").innerHTML = -Math.abs(hours)+1
      document.getElementById("minutesStart").innerHTML = -Math.abs(minutes)+1
      // document.getElementById("secondsStart").innerHTML = -Math.abs(seconds)+1
    // FUNCTIONALITY
    // clearInterval(x);
    setTimeout('refreshCountdown()', 1000 * 15); // 15 SECONDS OF RED NUMBERS, THEN REFRESH!
    }
  }, 1000) // END OF INTERVAL

 } // END OF ELSE STATEMENT FROM WEEKEND CHECK!

} // END OF FULL SCRIPT

function refreshCountdown() {window.location = "temporizador.html"}

// UPDATING PROGRESS BAR
function updateProgress(tickingClock) {

var value = (tickingClock-progress.min)/(progress.max-progress.min)*100
let valuePercent = parseFloat(value).toFixed(2)
if (valuePercent < 85.00) { progress.style.background = 'linear-gradient(to right, lightgreen 0%, #50C878 ' + valuePercent + '%, #fff ' + valuePercent + '%, white 100%)' }
if (valuePercent >= 85.00) { progress.style.background = 'linear-gradient(to right, pink 0%, #FF3131 ' + valuePercent + '%, #fff ' + valuePercent + '%, white 100%)' }

// UPDATING PROGRESS PORCENTAGE
var progressPercent = document.getElementById("progressPercent")
var roundPercent = Math.round(valuePercent).toFixed(0)
progressPercent.innerHTML = roundPercent + '%'

// TESTING
// console.log(progress.min, progress.value, valuePercent, progress.max)

}
</script>


<script type="text/javascript">
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
var currentScrollPos = window.pageYOffset;
  if (prevScrollpos > currentScrollPos) {
    document.getElementById("return").style.top = "6px"; 
  } else {
    document.getElementById("return").style.top = "-40px"; 
  }
  prevScrollpos = currentScrollPos;
}
</script>



<!- SAVE FUNCTION ->
<!- CONNECTED TO JQUERY WITH THE FOLLOWING SCRIPT ->
<script src="scripts/jquery-3.7.1.slim.js"></script>
<!- https://stackoverflow.com/questions/39155511/html-save-text-in-textarea ->
<!- https://jquery.com/download/ ->

<script type="text/javascript">
window.onbeforeunload = function() {
     $('textarea').each(function(){
        var id = $(this).attr('id');
        var value = $(this).val();
       localStorage.setItem(id, value);
    });
}
window.onload = function() {
    $('textarea').each(function(){
       var id = $(this).attr('id');
       var text2 = localStorage.getItem(id);
       if (text2 !== null) $('#'+id).val(text2);
    });
knowledgeProgress();
startTimer()
}
</script>


<!- USER STATS PROGRESS COUNTER ->
<div>
<textarea class="progressArea" id="knowledgeProgress" style="top: 10px">0</textarea>
</div>
<!- USER STATS PROGRESS COUNTER ->


<script type="text/javascript">
function knowledgeProgress() {
// =========================
// USER STATS CALCULATION
// =========================

// DECLARING VARIABLES!
var knowledgeProgress = document.getElementById("knowledgeProgress").value
var additionValue = 0.5
var newProgress = parseFloat(knowledgeProgress) + parseFloat(additionValue);
 if (knowledgeProgress < 100) { 
    document.getElementById("knowledgeProgress").value = newProgress.toFixed(2);
    // console.log("El nuevo progreso es de " + newProgress.toFixed(1));
  }
 if (knowledgeProgress >= 100) {document.getElementById("knowledgeProgress").value = 100}
}
</script>


</body>
</html>
