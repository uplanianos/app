<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en-US">
<html>
<head>
	<meta http-equiv="refresh" content="180">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="media/uplanianos-icon.png">
	<link rel="stylesheet" href="files/pages-style.css">
	<title>Uplanianos - Descarga Junaeb</title>
</head>

<body>
<a href="index.html"><div id="return" class="return">&larrhk;</div></a>


<div class="main">
    <div class="labels"><p>
      <select class="titleMenu" id="titleMenu" name="titleMenu" >
      <option value="0" selected disabled="disabled">â˜°</option>
      <option value="1">ğŸ“– Agenda</option>
      <option value="2">âœ”ï¸ Asistencia</option>
      <option value="3">ğŸ“ Avance Curricular</option>
      <option value="4">ğŸ—“ï¸ Calendario Oficial</option>
      <option value="5">â²ï¸ Cuenta Regresiva</option>
      <option value="6">ğŸ“ˆ Escala de Notas</option>
      <option value="7">ğŸ“š Horario de Clases</option>
      <option value="8">ğŸ’Š Justificador</option>
      <option value="9">ğŸ“œ Manual Estudiante</option>
      <option value="10">âœï¸ Nota de Pruebas</option>
      <option value="11">ğŸš« Paro Tracker</option>
      <option value="12">ğŸ’¯ Promedio Integral</option>
      <option value="125">ğŸ§  Preguntas Estudio</option>
      <option value="13">ğŸ“‹ Simulador Examen</option>
      <option value="14">â³ Temporizador</option>
      <option value="15">ğŸ“ Timebox (Upla)</option>
<!-- DISABLED     <option value="16">ğŸ“Š UpladÃ­sticas</option> -->
    </select>
    <a href="index.html" style="text-decoration: none;"><b>Uplanianos App:</b></a> Descarga Junaeb.</p></div>

<script type="text/javascript">
document.getElementById('titleMenu').addEventListener('change', function() {
 if (titleMenu.value == 1) {blurMenu(); window.location = "agenda.html"}
 if (titleMenu.value == 2) {blurMenu(); window.location = "asistencia.html?tipo=2&clases=12&asiste=0"}
 if (titleMenu.value == 3) {blurMenu(); window.location = "avance.html"}
 if (titleMenu.value == 4) {blurMenu(); window.location = "calendario.html"}
 if (titleMenu.value == 5) {blurMenu(); window.location = "countdown.html"}
 if (titleMenu.value == 6) {blurMenu(); window.location = "notas.html?escala=70"}
 if (titleMenu.value == 7) {blurMenu(); window.location = "horario.html"}
 if (titleMenu.value == 8) {blurMenu(); window.location = "justify.html"}
 if (titleMenu.value == 9) {blurMenu(); window.location = "manual-estudiante.html"}
 if (titleMenu.value == 10) {blurMenu(); window.location = "pruebas.html?total=100&puntos=0"}
 if (titleMenu.value == 11) {blurMenu(); window.location = "sigueparo.html"}
 if (titleMenu.value == 12) {blurMenu(); window.location = "integrales.html?x=2&g1=0.0&g2=0.0"}
 if (titleMenu.value == 125) {blurMenu(); window.location = "estudio.html"}
 if (titleMenu.value == 13) {blurMenu(); window.location = "examen.html?promedio=3.5&examen=4.0"}
 if (titleMenu.value == 14) {blurMenu(); window.location = "temporizador.html"}
 if (titleMenu.value == 15) {blurMenu(); window.location = "timebox.html"}
 if (titleMenu.value == 16) {blurMenu(); window.location = "upladisticas.html"}
});

function blurMenu(){document.getElementById('titleMenu').value = 0; document.getElementById('titleMenu').blur();}
</script> 

	<br>
	<div class="grid-item-slider">

	 <br>
	 <div>
	  <b>Compras:</b>
	  <input type="button" id="moreButton" value="+" onclick="buyMore()">
	  <input type="button" id="lessButton" value="x" onclick="returnLast()">
	  <input type="number" id="howMany" value="1" min="1" max="6" step="1" style="display: none;">
	  </div>
	 <br>

	 <div style="text-align: center;">
	  Boleta NÂ°1:<span class="money">$</span>
	  <input type="number" id="receipt1" class="junaeb-compras" value="0" min="0" step="1" onclick="checkOne()" onchange="adjustBalance(month)">
	 </div>
	  
	 <div id="divReceipt2" style="text-align: center; display: none;">
	  Boleta NÂ°2:<span class="money">$</span>
	  <input type="number" id="receipt2" class="junaeb-compras" value="0" min="0" step="1" onclick="checkTwo()" onchange="adjustBalance(month)">

	 </div>

	 <div id="divReceipt3" style="text-align: center; display: none;">
	  Boleta NÂ°3:<span class="money">$</span>
	  <input type="number" id="receipt3" class="junaeb-compras" value="0" min="0" step="1" onclick="checkThree()" onchange="adjustBalance(month)">
	 </div>

	 <div id="divReceipt4" style="text-align: center; display: none;">
	  Boleta NÂ°4:<span class="money">$</span>
	  <input type="number" id="receipt4" class="junaeb-compras" value="0" min="0" step="1" onclick="checkFour()" onchange="adjustBalance(month)">
	 </div>

	 <div id="divReceipt5" style="text-align: center; display: none;">
	  Boleta NÂ°5:<span class="money">$</span>
	  <input type="number" id="receipt5" class="junaeb-compras" value="0" min="0" step="1" onclick="checkFive()" onchange="adjustBalance(month)">
	 </div>

	 <div id="divReceipt6" style="text-align: center; display: none;">
	  Boleta NÂ°6:<span class="money">$</span>
	  <input type="number" id="receipt6" class="junaeb-compras" value="0" min="0" step="1" onclick="checkSixZero()" onchange="adjustBalance(month)">
	 </div>

	 <br>

	 <div><big><b>Saldo:</b></big></div><br>
	  <div style="text-align: center;">
	  <span class="money">$</span>
	  <input type="number" id="theBalance" class="junaeb-saldo" value="0" disabled readonly>
	  </div><br>
	  <div id="clearJunaeb" class="clearJunaeb"><input type="button" id="resetJunaeb" value="BORRAR" onclick="clearGrades()">
	 </div>

	<!- End of "grid-item-tools" Div ->
	</div>

    <br><br>
  </div>

<br><br>
</div>



<script type="text/javascript">
// SETTING UP GLOBAL VALUES!
// SETTING UP GLOBAL VALUES!
// SETTING UP GLOBAL VALUES!

// GETTING MONTH!
const d = new Date()
let month = d.getMonth() +1
// +1 because normally months start with Zero (0):
// Jan=0, Feb=1, Mar=2, Apr=3, May=4, Jun=5, Jul=6, Aug=7, etc... - Dec=11!

// DECLARING VALUES PER SEMESTER!
var theMoney = 47000
var firstTerm = theMoney
var secondTerm = theMoney + 1000
var budget
var finalBalance

// INITIAL SETUP (LOAD ON START)
function initialSetup() {

// DECLARING ELEMENTS!
// DIVS
var divReceipt2 = document.getElementById("divReceipt2")
var divReceipt3 = document.getElementById("divReceipt3")
var divReceipt4 = document.getElementById("divReceipt4")
var divReceipt5 = document.getElementById("divReceipt5")
var divReceipt6 = document.getElementById("divReceipt6")
// INPUT VALUES
var receipt1 = document.getElementById("receipt1")
var receipt2 = document.getElementById("receipt2")
var receipt3 = document.getElementById("receipt3")
var receipt4 = document.getElementById("receipt4")
var receipt5 = document.getElementById("receipt5")
var receipt6 = document.getElementById("receipt6")
// FINAL BALANCE (READ ONLY)
var theBalance = document.getElementById("theBalance")

// CHECKING PURCHASED AMOUNT
var moreButton = document.getElementById("moreButton")
var lessButton = document.getElementById("lessButton")
var howMany = document.getElementById("howMany").value

if (howMany == 1) {
 divReceipt2.style.display = "none";  divReceipt3.style.display = "none";
 divReceipt4.style.display = "none"; divReceipt5.style.display = "none";
 divReceipt6.style.display = "none"; lessButton.style.visibility = "hidden";
 moreButton.style.visibility = "visible" }

if (howMany == 2) {
 divReceipt2.style.display = "block";  divReceipt3.style.display = "none";
 divReceipt4.style.display = "none"; divReceipt5.style.display = "none";
 divReceipt6.style.display = "none"; lessButton.style.visibility = "visible";
 moreButton.style.visibility = "visible" }

if (howMany == 3) {
 divReceipt2.style.display = "block"; divReceipt3.style.display = "block"
 divReceipt4.style.display = "none"; divReceipt5.style.display = "none";
 divReceipt6.style.display = "none"; lessButton.style.visibility = "visible";
 moreButton.style.visibility = "visible" }

if (howMany == 4) {
 divReceipt2.style.display = "block"; divReceipt3.style.display = "block";
 divReceipt4.style.display = "block"; divReceipt5.style.display = "none";
 divReceipt6.style.display = "none"; lessButton.style.visibility = "visible";
 moreButton.style.visibility = "visible" }

if (howMany == 5) {
 divReceipt2.style.display = "block"; divReceipt3.style.display = "block";
 divReceipt4.style.display = "block"; divReceipt5.style.display = "block";
 divReceipt6.style.display = "none"; lessButton.style.visibility = "visible";
 moreButton.style.visibility = "visible" }

if (howMany == 6) {
 divReceipt2.style.display = "block"; divReceipt3.style.display = "block";
 divReceipt4.style.display = "block"; divReceipt5.style.display = "block";
 divReceipt6.style.display = "block"; lessButton.style.visibility = "visible";
 moreButton.style.visibility = "hidden" }

// INITIAL BALANCE CHECKS!
if (receipt1.value === "" || receipt1.value === null || receipt1.value === undefined || receipt1.value === NaN) { document.getElementById("receipt1").value = 0 }
if (receipt2.value === "" || receipt2.value === null || receipt2.value === undefined || receipt2.value === NaN) { document.getElementById("receipt2").value = 0 }
if (receipt3.value === "" || receipt3.value === null || receipt3.value === undefined || receipt3.value === NaN) { document.getElementById("receipt3").value = 0 }
if (receipt4.value === "" || receipt4.value === null || receipt4.value === undefined || receipt4.value === NaN) { document.getElementById("receipt4").value = 0 }
if (receipt5.value === "" || receipt5.value === null || receipt5.value === undefined || receipt5.value === NaN) { document.getElementById("receipt5").value = 0 }
if (receipt6.value === "" || receipt6.value === null || receipt6.value === undefined || receipt6.value === NaN) { document.getElementById("receipt6").value = 0 }

// DOING THE INITIAL MATH (ON LOAD)!
var expenses = parseInt(receipt1.value) + parseInt(receipt2.value) + parseInt(receipt3.value) +
		parseInt(receipt4.value) + parseInt(receipt5.value) + parseInt(receipt6.value)

// UPDATING MONTHLY AMOUNT!
if (month >= 1 && month <= 2) { theBalance.value = 0; theBalance.style.backgroundColor = "gray" }
if (month >= 3 && month <= 7) { budget = firstTerm }
if (month >= 8 && month <= 12) { budget = secondTerm }

// ADDING VALUES INTO BALANCE!
finalBalance = budget-expenses
addSeparator(finalBalance)
checkColors()
}


// ADJUST VALUES WHEN EXPENSES CHANGE!
function adjustBalance(month) {

// DECLARING ELEMENTS!
var receipt1 = document.getElementById("receipt1")
var receipt2 = document.getElementById("receipt2")
var receipt3 = document.getElementById("receipt3")
var receipt4 = document.getElementById("receipt4")
var receipt5 = document.getElementById("receipt5")
var receipt6 = document.getElementById("receipt6")

// DOING THE INITIAL MATH (ON CHANGE)!
var expenses = parseInt(receipt1.value) + parseInt(receipt2.value) + parseInt(receipt3.value) +
		parseInt(receipt4.value) + parseInt(receipt5.value) + parseInt(receipt6.value)

if (month >= 1 && month <= 2) { theBalance.value = 0; theBalance.style.backgroundColor = "gray" }
if (month >= 3 && month <= 7) { budget = firstTerm }
if (month >= 8 && month <= 12) { budget = secondTerm }

// ADDING VALUES INTO BALANCE!
finalBalance = budget-expenses
addSeparator(finalBalance)
checkColors()
}


// ADD SEPARATOR FUNCTION!
function addSeparator(finalBalance) {
theBalance.value = finalBalance.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".")
}


// CHECK COLORS!
function checkColors() {
if (theBalance.value > 0) { theBalance.style.backgroundColor = "green" }
if (theBalance.value == 0) { theBalance.style.backgroundColor = "gray	" }
if (theBalance.value < 0) { theBalance.style.backgroundColor = "darkred" }
}


function clearGrades() {
Receipts = document.querySelectorAll('input.junaeb-compras')
for(let total of Receipts) { total.value = "0" }
document.getElementById("howMany").value = "1"
initialSetup()
}

function checkOne() {
var receipt1 = document.getElementById("receipt1")
if (receipt1.value == 0) { receipt1.value = "" }
if (receipt1.value.length > 3) { receipt1.value = receipt1.value.toLocaleString("ar-EG"); }
}

function checkTwo() {
var receipt2 = document.getElementById("receipt2")
if (receipt2.value == 0) { receipt2.value = "" }
}

function checkThree() {
var receipt3 = document.getElementById("receipt3")
if (receipt3.value == 0) { receipt3.value = "" }
}

function checkFour() {
var receipt4 = document.getElementById("receipt4")
if (receipt4.value == 0) { receipt4.value = "" }
}

function checkFive() {
var receipt5 = document.getElementById("receipt5")
if (receipt5.value == 0) { receipt5.value = "" }
}

function checkSix() {
var receipt6 = document.getElementById("receipt6")
if (receipt6.value == 0) { receipt6.value = "" }
}


function buyMore() {
var howMany = document.getElementById("howMany")
amount = howMany.value
var divReceipt2 = document.getElementById("divReceipt2")
var divReceipt3 = document.getElementById("divReceipt3")
var divReceipt4 = document.getElementById("divReceipt4")
var divReceipt5 = document.getElementById("divReceipt5")
var divReceipt6 = document.getElementById("divReceipt6")
if (amount >= 1 && amount <= 5) { amount++; howMany.value = amount; initialSetup() }
}

function returnLast() {
var howMany = document.getElementById("howMany")
amount = howMany.value
if (amount > 1 && amount <= 6) { amount--; howMany.value = amount; initialSetup() }

// DELETE LAST VALUE!
var thisReceipt
var maxValue = amount+1
if (maxValue >= 2 && maxValue <= 6) {
 for (let step = 1; step <= maxValue; step++) {
  thisReceipt= "receipt" + maxValue
  document.getElementById(thisReceipt).value = 0
  adjustBalance(month)
  end = maxValue
  }
 }
}

// END OF SCRIPT!
</script>


<!- SAVE FUNCTION ->
<!- CONNECTED TO JQUERY WITH THE FOLLOWING SCRIPT ->
<script src="scripts/jquery-3.7.1.slim.js"></script>
<!- https://stackoverflow.com/questions/39155511/html-save-text-in-textarea ->
<!- https://jquery.com/download/ ->

<script type="text/javascript">
window.onbeforeunload = function() {
     $('input').each(function(){
        var id = $(this).attr('id');
        var value = $(this).val();
       localStorage.setItem(id, value);
    });
}

window.onload = function() {
    $('input').each(function(){
       var id = $(this).attr('id');
       var text2 = localStorage.getItem(id);
       if (text2 !== null) $('#'+id).val(text2);
    });

// CALLS TO ANOTHER FUNCTION!!
initialSetup();
adjustBalance(month);

}
</script>



<script type="text/javascript">
var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
var currentScrollPos = window.pageYOffset;
  if (prevScrollpos > currentScrollPos) {
    document.getElementById("return").style.top = "6px"; 
  } else {
    document.getElementById("return").style.top = "-40px"; 
  }
  prevScrollpos = currentScrollPos;
}
</script>



</body>
</html>
