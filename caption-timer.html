<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en-US">
<html>
<head>
	<meta http-equiv="refresh" content="300">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Captions & Timer</title>

<style>
body {margin: 0px; padding: 0px; background-color: lightblue; overflow: hidden;}

.temporizador {
  background: linear-gradient(to right, lightgreen 15%, lightgreen 0%, #FFF 50%, #FFF 100%);
  border: solid 0px transparent;
  border-radius: 0px;
  width: 100%;
  height: 25px;
  margin-left: -1px;
  margin-top: -1px;
  outline: none;
  -webkit-appearance: none !important;
}

.temporizador::-webkit-slider-thumb {
  width: 0.5px;
  height: 24px;
  cursor: pointer;
  background: #666666aa;
  -webkit-appearance: none !important;
}

.progressPercent {
  position: absolute;
  width: 100%;
  margin-top: -24px;
  margin-left: 50%;
  margin-right: 50%;
  color: red;
  font-family: sans-serif;
  font-size: 16px;
}
</style>

</head>

<body onload="startTimer()" scrolling="no">



<iframe frameborder="0" scrolling="no" allowTransparency="true" allow="camera; microphone" seamless allowfullscreen sandbox="allow-scripts allow-forms allow-same-origin allow-popups" style="position: absolute; width: 100%; height: 96.8vh; border: none; padding: 0px; margin: 0px; overflow: hidden;" src="https://maestra.ai/tools/web-captioner/free/" >
</iframe>



<div style="position: absolute; bottom: 72px; left: 0px; width: 100%; height: 24px; background-color: lightblue;">
  <input type="range" id="progressBar" value="0" class="temporizador" />
  <div id="progressPercent" class="progressPercent">-</div>
</div>


<script type="text/javascript">
function startTimer() {

// I'M DISABLING THE PROGRESS BAR (RANGE INPUT OBJECT)

document.getElementById('progressBar').disabled = true

// SETTING CURRENT HOUR
const date = new Date();
const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
const thisMonth = date.getMonth() // ZERO is January
var thisDate = date.getDate()
// SETTING RIGHT NOW
const thisHour = date.getHours()
const theseMinutes = date.getMinutes()
// FORMATTING HOUR AS DOUBLE DIGITS
const doubleHour = thisHour.toString().padStart(2,0)
const doubleMinutes = theseMinutes.toString().padStart(2,0)


// SETTING UP CLASS PERIODS
// THE FORMAT MUST BE IN FULL FOR THE COUNTDOWN!!!
const period1 = "08:00:00"
const period2 = "09:30:00"
const period3 = "11:00:00"
const period4 = "12:30:00"
const period5 = "14:00:00"
const period6 = "15:30:00"
const period7 = "17:00:00"
const period8 = "18:30:00"

// SETTING UP BREAKS
const break1 = "09:15:00"
const break2 = "10:45:00"
const break3 = "12:15:00"
const break4 = "13:45:00"
const break5 = "15:15:00"
const break6 = "16:45:00"
const break7 = "18:15:00"
const break8 = "19:45:00"

const midnight = "24:00:00"

// SETTING CURRENT TIME
var rightNow = doubleHour+"."+doubleMinutes; // console.log(rightNow)

// SETTING UP CLASS TIME (DEFAULT VALUE)
var classTime = "00:00:00"

// SETTING HTML ELEMENTS
const nextEvent = document.getElementById("nextEvent")

// SETTING UP EVENT (CLASSES OR BREAK)
var thisEvent = "Classes"

// SETTING UP PERIODS
if (rightNow < 08.00) {classTime = period1}
if (rightNow >= 08.00 && rightNow < 09.15) {classTime = break1; thisEvent = "Classes"}
if (rightNow >= 09.15 && rightNow < 09.30) {classTime = period2; thisEvent = "Break"}
if (rightNow >= 09.30 && rightNow < 10.45) {classTime = break2; thisEvent = "Classes"}
if (rightNow >= 10.45 && rightNow < 11.00) {classTime = period3; thisEvent = "Break"}
if (rightNow >= 11.00 && rightNow < 12.15) {classTime = break3; thisEvent = "Classes"}
if (rightNow >= 12.15 && rightNow < 12.30) {classTime = period4; thisEvent = "Break"}
if (rightNow >= 12.30 && rightNow < 13.45) {classTime = break4; thisEvent = "Classes"}
if (rightNow >= 13.45 && rightNow < 14.00) {classTime = period5; thisEvent = "Break"}
if (rightNow >= 14.00 && rightNow < 15.15) {classTime = break5; thisEvent = "Classes"}
if (rightNow >= 15.15 && rightNow < 15.30) {classTime = period6; thisEvent = "Break"}
if (rightNow >= 15.30 && rightNow < 16.45) {classTime = break6; thisEvent = "Classes"}
if (rightNow >= 16.45 && rightNow < 17.00) {classTime = period7; thisEvent = "Break"}
if (rightNow >= 17.00 && rightNow < 18.15) {classTime = break7; thisEvent = "Classes"}
if (rightNow >= 18.15 && rightNow < 18.30) {classTime = period8; thisEvent = "Break"}
if (rightNow >= 18.30 && rightNow < 19.45) {classTime = break8; thisEvent = "Classes"}
if (rightNow >= 19.45) {classTime = midnight; thisEvent = "Break"}

// CALLING PROGRESS BAR FUNCTION & PASSING 'CLASS TIME' VALUE!!!
progressFunction(classTime, thisEvent)

// DATE FORMATTING AND TIME VARIABLES
var dateFormat = monthNames[thisMonth] + " " + thisDate + ", 2024 "

// UPDATE FINAL COUNTDOWN DATE
var finalDate = new Date(dateFormat+classTime).getTime()

// ORIGINAL COUNTDOWN DATE (COMMENTED OUT)
// var originalCountdown = new Date("Aug 7, 2024 10:45:00").getTime()

// FORMATTED COUNTDOWN DATE
var countdownDate = new Date(finalDate).getTime()

// Update the count down every 1 second
var loop = setInterval(function() {

// Get todays date and time
var now = new Date().getTime()

// COUNTDOWN FUNCTIONALITY
// COUNTDOWN FUNCTIONALITY
// COUNTDOWN FUNCTIONALITY

// Find the distance between now an the count down date
var distance = countdownDate - now;

// Time calculations for days, hours, minutes and seconds
var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))
var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60))
var seconds = Math.floor((distance % (1000 * 60)) / 1000)

// EXPIRED COUNTDOWN
  if (distance <= 0) {
    // clearInterval(loop);
    setTimeout('refreshCountdown()', 1000 * 1); // 1 SECOND TO REFRESH!
    }
  }, 1000) // END OF INTERVAL

} // END OF FULL SCRIPT


// END OF COUNTDOWN REFRESH FUNCTION
function refreshCountdown() {window.location = "caption-timer.html"}


// PROGRESS BAR FUNCTION
function progressFunction(classTime,thisEvent) {
theBar = document.getElementById("progressBar")

var classEnd = classTime.slice(0, -3) // TIME IS SLICED TO 4 DIGITS FOR MILLISECOND CONVERSION

var theStart = "00:00"
var theEnd = "24:00"

  if (classEnd == "08:00") {theStart = "00:00"; theEnd = "08:00"} // START OF DAY

  if (classEnd == "09:15") {theStart = "08:00"; theEnd = "09:15"} // FIRST PERIOD
  if (classEnd == "09:30") {theStart = "09:15"; theEnd = "09:30"} // FIRS BREAK

  if (classEnd == "10:45") {theStart = "09:30"; theEnd = "10:45"} // SECOND PERIOD
  if (classEnd == "11:00") {theStart = "10:45"; theEnd = "11:00"} // SECOND BREAK

  if (classEnd == "12:15") {theStart = "11:00"; theEnd = "12:15"} // THIRD PERIOD
  if (classEnd == "12:30") {theStart = "12:15"; theEnd = "12:30"} // THIRD BREAK

  if (classEnd == "13:45") {theStart = "12:30"; theEnd = "13:45"} // FOURTH BREAK
  if (classEnd == "14:00") {theStart = "13:45"; theEnd = "14:00"} // FOURTH PERIOD

  if (classEnd == "15:15") {theStart = "14:00"; theEnd = "15:15"} // FIFTH PERIOD
  if (classEnd == "15:30") {theStart = "15:15"; theEnd = "15:30"} // FIFTH BREAK

  if (classEnd == "16:45") {theStart = "15:30"; theEnd = "16:45"} // SIXTH PERIOD
  if (classEnd == "17:00") {theStart = "16:45"; theEnd = "17:00"} // SIXTH BREAK

  if (classEnd == "18:15") {theStart = "17:00"; theEnd = "18:15"} // SEVENTH PERIOD
  if (classEnd == "18:30") {theStart = "18:15"; theEnd = "18:30"} // SEVENTH BREAK

  if (classEnd == "19:45") {theStart = "18:30"; theEnd = "19:45"} // EIGTH PERIOD
  if (classEnd == "24:00") {theStart = "19:45"; theEnd = "24:00"} // END OF DAY

// Update the count down every 1 second
var clockTicking = setInterval(function() {
const now = new Date()
const hour = now.getHours()
const minutes = now.getMinutes()
// FORMATTING THE DOUBLE TIME
const doubleHour = hour.toString().padStart(2,0)
const doubleMinutes = minutes.toString().padStart(2,0)
let theTime = (doubleHour + ":" + doubleMinutes)

// TURNING TIMES INTO MILLISECONDS
let starting = Number(theStart.split(':')[0]) * 60 * 60 * 1000 + Number(theStart.split(':')[1]) * 60 * 1000
let current = Number(theTime.split(':')[0]) * 60 * 60 * 1000 + Number(theTime.split(':')[1]) * 60 * 1000
let ending = Number(theEnd.split(':')[0]) * 60 * 60 * 1000 + Number(theEnd.split(':')[1]) * 60 * 1000

// UPDATING PROGRESS MIN / MAX
theBar.min = starting
theBar.value = current
theBar.max = ending

var value = (current-starting)/(ending-starting)*100
let valuePercent = parseFloat(value).toFixed(2)
thisPercent = document.getElementById("progressPercent")
thisPercent.innerHTML = Math.floor(valuePercent)+"%"
document.getElementById("progressPercent").innerHTML = Math.floor(valuePercent)+"%"
  if (thisEvent == "Classes") {
    if (valuePercent <= 79) {
      theBar.style.background = 'linear-gradient(to right, lightgreen 0%, #50C878 ' + valuePercent + '%, #fff ' + valuePercent + '%, white 100%)'
      thisPercent.style.color = "red" }
    if (valuePercent >= 80 && valuePercent <= 91) {
      theBar.style.background = 'linear-gradient(to right, lightblue 0%, blue ' + valuePercent + '%, #fff ' + valuePercent + '%, white 100%)'
      thisPercent.style.color = "red" }
    if (valuePercent >= 92) {
      theBar.style.background = 'linear-gradient(to right, #BF40BF 0%, #800080 ' + valuePercent + '%, #fff ' + valuePercent + '%, white 100%)'
      thisPercent.style.color = "yellow" }
  }
  if (thisEvent == "Break") {
    theBar.style.background = 'linear-gradient(to right, pink 0%, #FF0000cc ' + valuePercent + '%, #fff ' + valuePercent + '%, white 100%)'
    thisPercent.style.color = "blue"
    }

  }, 1000 * 1)
  // END OF CLOCK TICKING INTERVAL

} // END OF PROGRESS BAR FUNCTION
</script>


</body>
</html>
